!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Crontab=e():t.Crontab=e()}(window,function(){return function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e){t.exports=require("@babel/runtime/helpers/toConsumableArray")},function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var o=n(0),r=n.n(o),i=n(1),l=n.n(i),u=n(2),c=n.n(u),a=function(){function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.isDebug,o=void 0===n||n,r=e.autoStart,i=void 0===r||r;l()(this,u),this.isDebug=o,this.list=[],this.add(t),i&&this.start()}return c()(u,[{key:"start",value:function(){var t=this;this.stop(),this.exec(),setTimeout(function(){t.start()},6e4)}},{key:"stop",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"exec",value:function(){var s=this,t=new Date,f=[t.getMinutes(),t.getHours(),t.getDate(),t.getMonth(),t.getDay()];this.list.forEach(function(t){var e=t.time,n=void 0===e?[]:e,o=t.task,r=void 0===o?function(){}:o,i=t.name,u=void 0===i?"任务":i,l=t.once,c=void 0!==l&&l;if(s.shouldExec(n,f)){var a=function(t){return 9<t?t:"0".concat(t)};s.log("\n".concat(a(f[1]),":").concat(a(f[0]))),s.log("".concat(u," 开始执行 ..."));try{r()}catch(t){s.log(t)}s.log("".concat(u," 执行完成")),c&&s.remove(u)}})}},{key:"add",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=t.filter(function(t){return t.time&&t.task&&t.name});e.length<t.length&&this.log("定时任务被过滤掉 ".concat(t.length-e.length," 个")),this.list=[].concat(r()(this.list),r()(e)),this.log("当前定时".concat(this.list.length,"个任务..."))}},{key:"remove",value:function(e){var t=this.list;this.list=t.filter(function(t){return t.name!==e}),t.length!==this.list&&this.log("".concat(e," 被删除"))}},{key:"log",value:function(t){this.isDebug&&console.log(t)}},{key:"shouldExec",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=!0,o=0;o<e.length;o++)if("*"!==t[o]&&e[o]!==t[o]){n=!1;break}return n}}]),u}()}])});